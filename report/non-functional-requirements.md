# OrderBean 비기능적 요구사항 (NFR)

**생성일**: 2025년 12월 17일  
**프로젝트 유형**: Toy Project

---

## 1. 성능 요구사항 (Performance)

### 1.1 응답 시간
| 항목 | 목표값 | 비고 |
|------|--------|------|
| API 응답 시간 (평균) | < 500ms | 일반적인 CRUD 작업 |
| API 응답 시간 (최대) | < 2초 | 복잡한 쿼리 포함 |
| 페이지 로드 시간 (FCP) | < 2초 | First Contentful Paint |
| 페이지 완전 로드 시간 | < 4초 | 모든 리소스 로드 완료 |

### 1.2 처리량 (Throughput)
| 항목 | 목표값 | 비고 |
|------|--------|------|
| 동시 사용자 | 50명 | Toy Project 기준 |
| 초당 요청 수 (RPS) | 100 req/s | 단일 서버 기준 |
| 피크 시간 처리량 | 200 req/s | 점심/저녁 시간대 |

### 1.3 데이터베이스 성능
| 항목 | 목표값 | 비고 |
|------|--------|------|
| 쿼리 실행 시간 | < 100ms | 인덱스 적용 기준 |
| 연결 풀 크기 | 10개 | MongoDB 기본 설정 |
| 데이터 저장 용량 | 1GB | 초기 운영 기준 |

### 1.4 테스트 기준
```gherkin
Scenario: API 응답 시간 확인
Given 서버가 정상 운영 중이다
When 사용자가 카페 목록 API를 호출한다
Then 응답 시간이 500ms 이하이다
And HTTP 상태 코드가 200이다
```

---

## 2. 보안 요구사항 (Security)

### 2.1 인증 및 인가 (Authentication & Authorization)
| 항목 | 요구사항 |
|------|----------|
| 인증 방식 | JWT (JSON Web Token) |
| 토큰 만료 시간 | 7일 |
| 비밀번호 해싱 | bcrypt (salt rounds: 10) |
| 비밀번호 최소 길이 | 6자 이상 |
| 역할 기반 접근 제어 | customer, merchant, admin |

### 2.2 데이터 보호
| 항목 | 요구사항 |
|------|----------|
| 민감 정보 전송 | HTTPS 사용 권장 |
| 비밀번호 저장 | 평문 저장 금지, 해시만 저장 |
| API 응답 | 비밀번호 필드 제외 |
| 환경 변수 | .env 파일로 관리, git 제외 |

### 2.3 API 보안
| 항목 | 요구사항 |
|------|----------|
| 인증 헤더 | Authorization: Bearer {token} |
| 입력 검증 | express-validator 사용 |
| CORS | 허용된 도메인만 접근 |
| Rate Limiting | 권장 (미구현) |

### 2.4 보안 체크리스트
- [x] 비밀번호 bcrypt 해싱
- [x] JWT 토큰 인증
- [x] 역할 기반 접근 제어 (RBAC)
- [x] 입력 데이터 유효성 검증
- [x] API 응답에서 비밀번호 제외
- [ ] HTTPS 적용 (배포 시)
- [ ] Rate Limiting (선택)
- [ ] SQL Injection 방지 (MongoDB 사용으로 해당 없음)

### 2.5 테스트 기준
```gherkin
Scenario: 비인증 사용자 보호된 API 접근 거부
Given 사용자가 로그인하지 않았다
When 사용자가 주문 생성 API를 호출한다
Then HTTP 상태 코드가 401이다
And "No token, authorization denied" 메시지가 반환된다

Scenario: 일반 사용자 관리자 API 접근 거부
Given 사용자가 "customer" 역할로 로그인되어 있다
When 사용자가 관리자 주문 목록 API를 호출한다
Then HTTP 상태 코드가 403이다
And "Insufficient permissions" 메시지가 반환된다
```

---

## 3. 확장성 요구사항 (Scalability)

### 3.1 수평적 확장 고려사항
| 항목 | 현재 상태 | 확장 방안 |
|------|----------|----------|
| 서버 | 단일 서버 | Docker 컨테이너화 후 Load Balancer 추가 |
| 데이터베이스 | 단일 MongoDB | MongoDB Replica Set |
| 세션/토큰 | JWT (Stateless) | 확장에 유리 |
| 파일 저장 | 로컬 | AWS S3 또는 클라우드 스토리지 |

### 3.2 데이터 확장성
| 항목 | 현재 용량 | 확장 목표 |
|------|----------|----------|
| 사용자 수 | 1,000명 | 10,000명 |
| 카페 수 | 100개 | 1,000개 |
| 메뉴 수 | 1,000개 | 10,000개 |
| 일일 주문 수 | 500건 | 5,000건 |

### 3.3 코드 구조 확장성
| 항목 | 현재 구조 | 비고 |
|------|----------|------|
| 라우트 분리 | ✅ | routes/ 폴더 |
| 모델 분리 | ✅ | models/ 폴더 |
| 미들웨어 분리 | ✅ | middleware/ 폴더 |
| 컴포넌트 분리 | ✅ | components/, pages/ |
| Context 사용 | ✅ | AuthContext |

### 3.4 확장 가능한 아키텍처
```
현재 구조 (Monolithic):
┌─────────────────────────────────────┐
│           Frontend (React)          │
│              Port 3000              │
└─────────────┬───────────────────────┘
              │ API 호출
              ▼
┌─────────────────────────────────────┐
│          Backend (Express)          │
│              Port 5000              │
└─────────────┬───────────────────────┘
              │
              ▼
┌─────────────────────────────────────┐
│            MongoDB                  │
│           Port 27017                │
└─────────────────────────────────────┘

확장 구조 (권장):
┌─────────────────────────────────────┐
│         Load Balancer (Nginx)       │
└────────────┬────────────────────────┘
             │
     ┌───────┴───────┐
     ▼               ▼
┌─────────┐     ┌─────────┐
│ Server1 │     │ Server2 │
└────┬────┘     └────┬────┘
     │               │
     └───────┬───────┘
             ▼
┌─────────────────────────────────────┐
│       MongoDB Replica Set           │
│   Primary + Secondary + Arbiter     │
└─────────────────────────────────────┘
```

---

## 4. 사용성 요구사항 (Usability)

### 4.1 접근성 (Accessibility)
| 항목 | 요구사항 | 상태 |
|------|----------|------|
| 키보드 네비게이션 | Tab으로 모든 요소 접근 가능 | 권장 |
| 색상 대비 | WCAG 2.1 AA 기준 | 권장 |
| 폼 레이블 | 모든 입력 필드에 레이블 제공 | ✅ |
| 에러 메시지 | 명확한 한국어 메시지 | ✅ |

### 4.2 반응형 디자인 (Responsive Design)
| 디바이스 | 화면 너비 | 지원 상태 |
|----------|----------|----------|
| 모바일 | 320px ~ 767px | ✅ Tailwind CSS |
| 태블릿 | 768px ~ 1023px | ✅ Tailwind CSS |
| 데스크톱 | 1024px 이상 | ✅ Tailwind CSS |

### 4.3 사용자 피드백
| 항목 | 구현 방법 | 상태 |
|------|----------|------|
| 로딩 상태 | 스피너 또는 스켈레톤 UI | 권장 |
| 성공 알림 | react-hot-toast | ✅ |
| 에러 알림 | react-hot-toast | ✅ |
| 폼 유효성 검사 | 실시간 피드백 | 권장 |

### 4.4 UI/UX 가이드라인
| 항목 | 요구사항 |
|------|----------|
| 버튼 클릭 영역 | 최소 44x44px (모바일) |
| 폼 입력 필드 | 명확한 placeholder 제공 |
| 네비게이션 | 일관된 메뉴 구조 |
| 로딩 시간 | 2초 이상 시 로딩 인디케이터 표시 |
| 에러 페이지 | 404, 500 페이지 제공 |

### 4.5 테스트 기준
```gherkin
Scenario: 로그인 성공 시 피드백 제공
Given 사용자가 로그인 페이지에 있다
When 유효한 자격 증명으로 로그인한다
Then "로그인 성공!" 토스트 메시지가 표시된다
And 카페 목록 페이지로 이동한다

Scenario: 로그인 실패 시 에러 메시지 표시
Given 사용자가 로그인 페이지에 있다
When 잘못된 비밀번호로 로그인을 시도한다
Then "Invalid credentials" 에러 토스트가 표시된다
And 로그인 페이지에 유지된다
```

---

## 5. 운영 요구사항 (Operational)

### 5.1 로깅 및 모니터링
| 항목 | 현재 상태 | 권장 |
|------|----------|------|
| 콘솔 로그 | console.log/error | Winston 또는 Morgan |
| 에러 추적 | 기본 try-catch | Sentry (선택) |
| 성능 모니터링 | 없음 | PM2 모니터링 |

### 5.2 배포 요구사항
| 항목 | 요구사항 |
|------|----------|
| Node.js 버전 | 18.x 이상 |
| MongoDB 버전 | 6.x 이상 |
| 환경 변수 관리 | .env 파일 |
| 프로세스 관리 | PM2 권장 |

### 5.3 백업 및 복구
| 항목 | 권장 사항 |
|------|----------|
| 데이터베이스 백업 | 일일 백업 (mongodump) |
| 백업 보관 기간 | 7일 |
| 복구 테스트 | 월 1회 |

---

## 6. 요약

### Toy Project 기준 우선순위

| 우선순위 | 항목 | 상태 |
|----------|------|------|
| **필수** | JWT 인증 | ✅ 구현됨 |
| **필수** | 비밀번호 해싱 | ✅ 구현됨 |
| **필수** | 입력 검증 | ✅ 구현됨 |
| **필수** | 역할 기반 접근 제어 | ✅ 구현됨 |
| **필수** | 반응형 디자인 | ✅ 구현됨 |
| **필수** | 사용자 피드백 (토스트) | ✅ 구현됨 |
| **권장** | HTTPS | 배포 시 적용 |
| **권장** | 로딩 인디케이터 | 추가 개발 |
| **선택** | Rate Limiting | 필요 시 추가 |
| **선택** | 에러 추적 (Sentry) | 필요 시 추가 |
| **선택** | 수평적 확장 | 사용자 증가 시 |

### 비기능적 요구사항 체크리스트

- [x] 성능: API 응답 시간 목표 설정
- [x] 보안: JWT + bcrypt 인증 구현
- [x] 보안: 역할 기반 접근 제어 구현
- [x] 확장성: 모듈화된 코드 구조
- [x] 사용성: 반응형 UI (Tailwind CSS)
- [x] 사용성: 토스트 알림 (react-hot-toast)
- [ ] 운영: 프로덕션 로깅 시스템
- [ ] 운영: 배포 자동화 (CI/CD)

